<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calculadora de Ritmo</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", Arial, sans-serif;
      background: #f9fafb;
      color: #111827;
      padding: 20px;
    }
    h1 {
      text-align: center;
      font-size: 1.5rem;
      margin-bottom: 20px;
    }
    .card {
      background: white;
      border-radius: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      padding: 20px;
      margin-bottom: 20px;
    }
    label { display: block; margin-bottom: 6px; font-weight: 500; }
    input, button {
      padding: 12px;
      border-radius: 12px;
      font-size: 1rem;
      width: 100%;
      box-sizing: border-box;
      border: 1px solid #d1d5db;
      text-align: center;
    }
    input:invalid {
      border-color: #f87171; /* rojo si inv√°lido */
    }
    button {
      background: #2563eb;
      color: white;
      border: none;
      font-weight: 600;
      margin-top: 10px;
    }
    button:hover { background: #1e40af; cursor: pointer; }
    table { width: 100%; border-collapse: collapse; margin-top: 15px; }
    th, td { padding: 10px; text-align: center; }
    th { background: #f3f4f6; }
    tr:nth-child(even) td { background: #f9fafb; }
    .time { font-weight: 500; }
    #totalTime {
      text-align: center;
      font-size: 1.2rem;
      font-weight: bold;
      margin: 10px 0 20px 0;
      color: #2563eb;
    }
  </style>
</head>
<body>
  <h1>üèÉ Calculadora de Ritmo</h1>

  <div class="card">
    <label for="pace">Ritmo (mm:ss por km):</label>
    <input type="tel" id="pace" maxlength="5" placeholder="05:30" pattern="[0-1]?[0-9]:[0-5][0-9]">

    <label for="distance">Distancia (km):</label>
    <input type="number" id="distance" min="1" max="42" value="21" inputmode="numeric" pattern="[0-9]*">

    <button id="generateBtn">Generar Tabla</button>
  </div>

  <div id="result" class="card" style="display:none;">
    <div id="totalTime"></div>
    <table>
      <thead>
        <tr><th>Km</th><th>Tiempo Acumulado</th></tr>
      </thead>
      <tbody id="tableBody"></tbody>
    </table>
  </div>

  <script>
    const paceInput = document.getElementById("pace");

    // Formato bonito mientras escribes: autoinsertar ":" y limitar valores
    paceInput.addEventListener("input", function(){
      let val = this.value.replace(/\D/g,''); // eliminar no n√∫meros
      if(val.length > 2){
        let min = val.slice(0,2);
        let sec = val.slice(2,4);
        if(Number(min) > 10) min = "10"; // m√°ximo minutos 10
        if(Number(sec) > 59) sec = "59";  // m√°ximo segundos 59
        val = min + ':' + sec;
      }
      this.value = val;
    });

    function formatTime(totalSec) {
      const hrs = Math.floor(totalSec / 3600);
      const min = Math.floor((totalSec % 3600) / 60);
      const sec = totalSec % 60;
      return (hrs > 0 ? hrs + ":" : "") +
             String(min).padStart(2, "0") + ":" +
             String(sec).padStart(2, "0");
    }

    function generateTable() {
      const paceVal = paceInput.value.split(':');
      if(paceVal.length !== 2) {
        alert("‚ö†Ô∏è Ingresa el ritmo en formato mm:ss");
        return;
      }
      const min = Number(paceVal[0]);
      const sec = Number(paceVal[1]);
      const distance = Number(document.getElementById("distance").value);

      if(isNaN(min) || isNaN(sec) || (min===0 && sec===0) || distance < 1 || distance > 42) {
        alert("‚ö†Ô∏è Ingresa valores v√°lidos:\n- Ritmo 0:01 a 10:59\n- Distancia 1 a 42 km");
        return;
      }

      const paceSec = min*60 + sec;

      setTimeout(() => {
        const tbody = document.getElementById("tableBody");
        tbody.innerHTML = "";

        for(let km=1; km<=distance; km++){
          const row = document.createElement("tr");
          const kmCell = document.createElement("td");
          kmCell.textContent = km;

          const timeCell = document.createElement("td");
          timeCell.textContent = formatTime(paceSec*km);
          timeCell.classList.add("time");

          row.appendChild(kmCell);
          row.appendChild(timeCell);
          tbody.appendChild(row);
        }

        document.getElementById("totalTime").textContent =
          `‚è±Ô∏è Tiempo estimado total: ${formatTime(paceSec*distance)}`;
        document.getElementById("result").style.display = "block";
      },10);
    }

    document.getElementById("generateBtn").addEventListener("click", generateTable);
  </script>
</body>
</html>
